<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learning to Fly - Guitar Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2C2E3B 0%, #3d4058 100%);
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            text-align: center;
            max-width: 1000px;
            width: 100%;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffffff, #e0e0e0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: #b0b0b0;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
            font-weight: 500;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
            background: linear-gradient(135deg, #5CBF60 0%, #4CAF50 100%);
        }

        button:active {
            transform: translateY(0);
        }

        button.stop {
            background: linear-gradient(135deg, #f44336 0%, #d32f2f 100%);
            box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
        }

        button.stop:hover {
            background: linear-gradient(135deg, #f55a4e 0%, #f44336 100%);
            box-shadow: 0 6px 20px rgba(244, 67, 54, 0.4);
        }

        .tempo-control {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #ffffff;
        }

        input[type="range"] {
            width: 120px;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        .guitar-display {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .current-chord {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .chord-info {
            color: #b0b0b0;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .pattern-info {
            color: #4CAF50;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .guitar-tabs {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 20px;
            margin-top: 20px;
            align-items: start;
        }

        .fret-display {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            min-width: 200px;
        }

        .fret-title {
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .string {
            display: flex;
            align-items: center;
            margin: 8px 0;
            font-family: monospace;
            font-size: 1.1rem;
        }

        .string-name {
            width: 30px;
            font-weight: bold;
            color: #b0b0b0;
        }

        .fret-number {
            width: 30px;
            text-align: center;
            padding: 5px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.1);
            margin-left: 10px;
        }

        .fret-number.active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            font-weight: bold;
        }

        .strumming-pattern {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
        }

        .pattern-title {
            color: #4CAF50;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .strum-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 8px;
            margin-top: 15px;
        }

        .strum-beat {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .strum-beat.active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            transform: scale(1.2);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        .strum-beat.down {
            background: rgba(255, 255, 255, 0.2);
        }

        .chord-progression {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .chord-block {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .chord-block.active {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4);
        }

        @media (max-width: 900px) {
            .container {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .guitar-tabs {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Learning to Fly</h1>
        <p class="subtitle">Tom Petty & Jeff Lynne - Gitarre</p>
        
        <div class="guitar-display">
            <div class="current-chord" id="currentChord">F</div>
            <div class="chord-info">Aktueller Akkord</div>
            <div class="pattern-info" id="patternInfo">Strumming Pattern: ↓ ↓ ↑ ↓ ↑ ↓ ↑</div>
        </div>

        <div class="controls">
            <button id="playBtn" onclick="togglePlay()">▶ Gitarre abspielen</button>
            <button class="stop" onclick="stopPlay()">⏹ Stop</button>
            <div class="tempo-control">
                <span>Tempo:</span>
                <input type="range" id="tempoSlider" min="80" max="140" value="110" oninput="updateTempo()">
                <span id="tempoDisplay">110 BPM</span>
            </div>
        </div>

        <div class="guitar-tabs">
            <div class="fret-display">
                <div class="fret-title">Aktuelle Akkord-Griffe</div>
                <div id="fretboard">
                    <!-- Wird per JavaScript generiert -->
                </div>
            </div>

            <div class="strumming-pattern">
                <div class="pattern-title">Strumming Pattern</div>
                <div class="strum-grid" id="strumGrid">
                    <!-- Wird per JavaScript generiert -->
                </div>
            </div>
        </div>

        <div class="chord-progression" id="chordProgression">
            <!-- Wird per JavaScript generiert -->
        </div>
    </div>

    <script>
        // Akkordfolge aus dem Notenblatt: F-C-Am-G
        const chordProgression = [
            'F', 'C', 'Am', 'G',
            'F', 'C', 'Am', 'G'
        ];

        // Gitarren-Akkordgriffe (Bund-Positionen für E-A-D-G-B-E)
        const chordShapes = {
            'F': [1, 3, 3, 2, 1, 1],    // F-Dur Barré
            'C': [0, 3, 2, 0, 1, 0],    // C-Dur offen
            'Am': [0, 0, 2, 2, 1, 0],   // A-Moll offen
            'G': [3, 2, 0, 0, 3, 3]     // G-Dur offen
        };

        // Akkord-Noten für Audio (Grundton, Terz, Quinte)
        const chordNotes = {
            'F': [174.61, 220.00, 261.63],   // F3, A3, C4
            'C': [261.63, 329.63, 392.00],   // C4, E4, G4
            'Am': [220.00, 261.63, 329.63],  // A3, C4, E4
            'G': [196.00, 246.94, 293.66]    // G3, B3, D4
        };

        // Strumming Pattern: Down-Down-Up-Down-Up-Down-Up
        const strummingPattern = ['↓', '↓', '↑', '↓', '↑', '↓', '↑', ''];
        
        const stringNames = ['E', 'A', 'D', 'G', 'B', 'e'];

        let isPlaying = false;
        let currentChordIndex = 0;
        let currentStrumIndex = 0;
        let playInterval;
        let audioContext;
        let tempo = 110;
        let beatDuration;

        // Audio Context initialisieren
        function initAudio() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // Gitarren-Akkord abspielen
        function playGuitarChord(chordName, strumDirection) {
            if (!audioContext) return;

            const notes = chordNotes[chordName];
            const oscillators = [];
            const gainNodes = [];

            notes.forEach((frequency, index) => {
                // Leichte Verzögerung für Strumming-Effekt
                const delay = strumDirection === '↓' ? index * 0.02 : (notes.length - index - 1) * 0.02;
                
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                // Filter für Gitarren-Sound
                const filterNode = audioContext.createBiquadFilter();
                filterNode.type = 'lowpass';
                filterNode.frequency.value = 2000;
                
                oscillator.connect(filterNode);
                filterNode.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime + delay);
                oscillator.type = 'sawtooth'; // Gitarren-ähnlicher Klang

                // Envelope für natürlichen Gitarrenklang
                gainNode.gain.setValueAtTime(0, audioContext.currentTime + delay);
                gainNode.gain.linearRampToValueAtTime(0.15, audioContext.currentTime + delay + 0.01);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + delay + 0.8);

                oscillator.start(audioContext.currentTime + delay);
                oscillator.stop(audioContext.currentTime + delay + 1.0);

                oscillators.push(oscillator);
                gainNodes.push(gainNode);
            });
        }

        // Griffbrett anzeigen
        function displayFretboard() {
            const fretboard = document.getElementById('fretboard');
            const currentChord = chordProgression[currentChordIndex];
            const shape = chordShapes[currentChord];

            fretboard.innerHTML = '';
            
            stringNames.forEach((stringName, index) => {
                const stringDiv = document.createElement('div');
                stringDiv.className = 'string';
                
                const nameSpan = document.createElement('span');
                nameSpan.className = 'string-name';
                nameSpan.textContent = stringName;
                
                const fretSpan = document.createElement('span');
                fretSpan.className = 'fret-number';
                if (shape[index] === 0) {
                    fretSpan.textContent = 'o'; // Offene Saite
                } else {
                    fretSpan.textContent = shape[index];
                }
                
                stringDiv.appendChild(nameSpan);
                stringDiv.appendChild(fretSpan);
                fretboard.appendChild(stringDiv);
            });
        }

        // Strumming Grid erstellen
        function createStrummingGrid() {
            const grid = document.getElementById('strumGrid');
            grid.innerHTML = '';

            strummingPattern.forEach((direction, index) => {
                const beat = document.createElement('div');
                beat.className = 'strum-beat';
                beat.id = `strum-${index}`;
                beat.textContent = direction;
                if (direction === '↓') {
                    beat.classList.add('down');
                }
                grid.appendChild(beat);
            });
        }

        // Akkord-Progression anzeigen
        function displayChordProgression() {
            const container = document.getElementById('chordProgression');
            container.innerHTML = '';
            
            chordProgression.forEach((chord, index) => {
                const chordBlock = document.createElement('div');
                chordBlock.className = 'chord-block';
                chordBlock.textContent = chord;
                chordBlock.id = `chord-${index}`;
                container.appendChild(chordBlock);
            });
        }

        // Display aktualisieren
        function updateDisplay() {
            const currentChord = chordProgression[currentChordIndex];
            const currentStrum = strummingPattern[currentStrumIndex];
            
            document.getElementById('currentChord').textContent = currentChord;
            
            // Alle Hervorhebungen zurücksetzen
            document.querySelectorAll('.chord-block').forEach(block => {
                block.classList.remove('active');
            });
            document.querySelectorAll('.strum-beat').forEach(beat => {
                beat.classList.remove('active');
            });
            
            // Aktuelle Positionen hervorheben
            document.getElementById(`chord-${currentChordIndex}`)?.classList.add('active');
            document.getElementById(`strum-${currentStrumIndex}`)?.classList.add('active');
            
            displayFretboard();
        }

        // Tempo aktualisieren
        function updateTempo() {
            tempo = document.getElementById('tempoSlider').value;
            document.getElementById('tempoDisplay').textContent = tempo + ' BPM';
            beatDuration = (60 / tempo) / 2; // 8tel Noten
            
            if (isPlaying) {
                stopPlay();
                setTimeout(togglePlay, 100);
            }
        }

        // Aktuellen Beat abspielen
        function playCurrentBeat() {
            const currentChord = chordProgression[currentChordIndex];
            const currentStrum = strummingPattern[currentStrumIndex];
            
            if (currentStrum) { // Nur wenn nicht leer
                playGuitarChord(currentChord, currentStrum);
            }
            
            updateDisplay();
            
            // Zum nächsten Strum
            currentStrumIndex = (currentStrumIndex + 1) % strummingPattern.length;
            
            // Akkordwechsel nach kompletter Pattern
            if (currentStrumIndex === 0) {
                currentChordIndex = (currentChordIndex + 1) % chordProgression.length;
            }
        }

        // Wiedergabe starten/stoppen
        function togglePlay() {
            if (!isPlaying) {
                initAudio();
                if (audioContext.state === 'suspended') {
                    audioContext.resume();
                }
                
                beatDuration = (60 / tempo) / 2;
                isPlaying = true;
                document.getElementById('playBtn').innerHTML = '⏸ Pause';
                
                playCurrentBeat();
                playInterval = setInterval(() => {
                    if (isPlaying) {
                        playCurrentBeat();
                    }
                }, beatDuration * 1000);
            } else {
                pausePlay();
            }
        }

        // Wiedergabe pausieren
        function pausePlay() {
            isPlaying = false;
            clearInterval(playInterval);
            document.getElementById('playBtn').innerHTML = '▶ Gitarre abspielen';
        }

        // Wiedergabe stoppen
        function stopPlay() {
            isPlaying = false;
            clearInterval(playInterval);
            currentChordIndex = 0;
            currentStrumIndex = 0;
            updateDisplay();
            document.getElementById('playBtn').innerHTML = '▶ Gitarre abspielen';
        }

        // Initialisierung
        document.addEventListener('DOMContentLoaded', () => {
            createStrummingGrid();
            displayChordProgression();
            updateTempo();
            updateDisplay();
        });
    </script>
</body>
</html>