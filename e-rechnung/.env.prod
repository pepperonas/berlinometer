# Production Environment Configuration for HandwerkOS
# Copy this file to .env.prod on your server and fill in the secure values

# ============ APPLICATION ============
NODE_ENV=production
APP_NAME=HandwerkOS
APP_VERSION=1.0.0
APP_URL=https://erp.mrx3k1.de
API_URL=https://erp.mrx3k1.de/api/v1

# ============ DATABASE ============
POSTGRES_USER=handwerkos_prod
POSTGRES_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_FOR_POSTGRES
POSTGRES_DB=handwerkos_production
DATABASE_URL=postgresql://handwerkos_prod:CHANGE_THIS_SECURE_PASSWORD_FOR_POSTGRES@postgres:5432/handwerkos_production

# ============ REDIS ============
REDIS_PASSWORD=CHANGE_THIS_SECURE_PASSWORD_FOR_REDIS
REDIS_URL=redis://:CHANGE_THIS_SECURE_PASSWORD_FOR_REDIS@redis:6379

# ============ AUTHENTICATION ============
# IMPORTANT: Generate secure random strings for production!
JWT_SECRET=CHANGE_THIS_TO_SECURE_JWT_SECRET_MIN_32_CHARACTERS_LONG_RANDOM_STRING
JWT_REFRESH_SECRET=CHANGE_THIS_TO_SECURE_REFRESH_SECRET_MIN_32_CHARACTERS_LONG_RANDOM_STRING
JWT_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d
SESSION_SECRET=CHANGE_THIS_TO_SECURE_SESSION_SECRET_MIN_32_CHARACTERS_LONG_RANDOM_STRING

# ============ EMAIL (SMTP) ============
SMTP_HOST=mail.mrx3k1.de
SMTP_PORT=587
SMTP_USER=noreply@mrx3k1.de
SMTP_PASSWORD=YOUR_EMAIL_PASSWORD
SMTP_FROM_EMAIL=noreply@erp.mrx3k1.de
SMTP_FROM_NAME=HandwerkOS

# ============ FILE STORAGE (MinIO) ============
MINIO_ROOT_USER=handwerkos_minio_prod
MINIO_ROOT_PASSWORD=CHANGE_THIS_SECURE_MINIO_PASSWORD_MIN_32_CHARS
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=handwerkos_minio_prod
S3_SECRET_KEY=CHANGE_THIS_SECURE_MINIO_PASSWORD_MIN_32_CHARS
S3_BUCKET_NAME=handwerkos-documents
S3_REGION=eu-central-1

# ============ API CONFIGURATION ============
API_PORT=3001
API_HOST=0.0.0.0
API_PREFIX=/api/v1

# Rate Limiting (Production)
RATE_LIMIT_MAX=500
RATE_LIMIT_WINDOW=15m

# CORS
CORS_ORIGIN=https://erp.mrx3k1.de
CORS_CREDENTIALS=true

# ============ FRONTEND CONFIGURATION ============
NEXT_PUBLIC_API_URL=https://erp.mrx3k1.de/api/v1
NEXT_PUBLIC_APP_NAME=HandwerkOS
NEXT_PUBLIC_APP_VERSION=1.0.0

# ============ FEATURES FLAGS ============
FEATURE_REGISTRATION_ENABLED=true
FEATURE_EMAIL_VERIFICATION=true
FEATURE_TWO_FACTOR_AUTH=true
FEATURE_INVOICE_EMAIL=true
FEATURE_XRECHNUNG_EXPORT=true
FEATURE_ZUGFERD_EXPORT=true

# ============ BUSINESS CONFIGURATION ============
DEFAULT_CURRENCY=EUR
DEFAULT_LANGUAGE=de
DEFAULT_TIMEZONE=Europe/Berlin
DEFAULT_DATE_FORMAT=DD.MM.YYYY

# Invoice settings
INVOICE_DUE_DAYS=30
REMINDER_DAYS_1=7
REMINDER_DAYS_2=14
REMINDER_DAYS_3=21
REMINDER_FEE=5.00

# ============ MONITORING & LOGGING ============
LOG_LEVEL=warn
LOG_FORMAT=json

# Sentry (Error Tracking) - Optional
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production

# ============ PRODUCTION SECURITY ============
SECURE_COOKIES=true
HTTPS_ONLY=true
HELMET_ENABLED=true

# ============ BACKUP & MAINTENANCE ============
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ============ SUBSCRIPTION & BILLING (Future) ============
# STRIPE_PUBLIC_KEY=pk_live_...
# STRIPE_SECRET_KEY=sk_live_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# Plan limits (documents per month)
PLAN_STARTER_LIMIT=10
PLAN_PROFESSIONAL_LIMIT=100
PLAN_BUSINESS_LIMIT=500
PLAN_ENTERPRISE_LIMIT=-1  # Unlimited

# ============ CACHING ============
CACHE_TTL=3600  # 1 hour
CACHE_ENABLED=true

# ============ QUEUE PROCESSING ============
QUEUE_ENABLED=true
QUEUE_CONCURRENCY=3  # Lower for production server

# SSL Certificate paths (if using custom certificates)
SSL_CERT_PATH=/etc/ssl/certs/erp.mrx3k1.de.crt
SSL_KEY_PATH=/etc/ssl/private/erp.mrx3k1.de.key