<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Einwegfunktionen-Demo</title>
    <style>
        :root {
            --primary: #2C2E3B;
            --primary-light: #3F4155;
            --accent: #7289DA;
            --text: #E0E0E0;
            --text-secondary: #9DA0A4;
            --background: #373A4D;
            --card: #2C2E3B;
            --border: #3F4155;
            --success: #43B581;
            --error: #F04747;
        }

        body {
            font-family: 'Roboto', 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background-color: var(--primary);
            color: var(--text);
            padding: 20px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .card {
            background-color: var(--card);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        h1, h2, h3 {
            margin-top: 0;
            color: var(--text);
        }

        .header h1 {
            color: var(--text);
        }

        .function-box {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
        }

        label {
            margin-bottom: 5px;
            font-weight: 500;
        }

        input[type="number"] {
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 16px;
            background-color: var(--primary-light);
            color: var(--text);
        }

        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--primary-light);
        }

        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            background-color: var(--primary-light);
        }

        .calculation-time {
            font-size: 14px;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        .example {
            margin-top: 10px;
            padding: 10px;
            background-color: rgba(114, 137, 218, 0.1);
            border-left: 4px solid var(--accent);
        }

        .performance-chart {
            height: 300px;
            margin-top: 20px;
        }

        .info-box {
            background-color: rgba(67, 181, 129, 0.1);
            border-left: 4px solid var(--success);
            padding: 10px 15px;
            margin: 10px 0;
        }

        .warning-box {
            background-color: rgba(240, 71, 71, 0.1);
            border-left: 4px solid var(--error);
            padding: 10px 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>Einwegfunktionen - Interaktive Demo</h1>
        <p>Eine Demonstration von Einwegfunktionen und Falltürfunktionen mit praktischen Beispielen</p>
    </div>

    <div class="card">
        <h2>Was sind Einwegfunktionen?</h2>
        <p>
            <strong>Einwegfunktionen</strong> sind mathematische Funktionen, die in eine Richtung (Vorwärtsberechnung)
            leicht zu berechnen sind, aber in die andere Richtung (Rückwärtsberechnung/Umkehrfunktion)
            rechnerisch sehr aufwändig sind.
        </p>
        <p>
            Ein klassisches Beispiel ist die <strong>Multiplikation von Primzahlen</strong> vs. <strong>Primfaktorzerlegung</strong>:
        <ul>
            <li>Vorwärts: Zwei Primzahlen multiplizieren ist einfach</li>
            <li>Rückwärts: Eine große Zahl in ihre Primfaktoren zerlegen ist sehr aufwändig</li>
        </ul>
        </p>
        <div class="info-box">
            Eine <strong>Falltürfunktion</strong> ist eine spezielle Einwegfunktion, bei der die Rückwärtsberechnung
            mit einer Zusatzinformation (dem "Falltürschlüssel") leicht berechnet werden kann.
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <h3>Beispiel 1: Primzahl-Multiplikation</h3>
            <div class="function-box">
                <div class="input-group">
                    <label for="prime1">Erste Primzahl:</label>
                    <input type="number" id="prime1" value="8191">
                </div>
                <div class="input-group">
                    <label for="prime2">Zweite Primzahl:</label>
                    <input type="number" id="prime2" value="4093">
                </div>
                <button onclick="multiplyPrimes()">Multiplizieren (Vorwärtsberechnung)</button>
                <div class="result" id="multiplicationResult">Ergebnis wird hier angezeigt</div>
                <div class="calculation-time" id="multiplicationTime"></div>
            </div>
        </div>

        <div class="card">
            <h3>Beispiel 2: Primfaktorzerlegung</h3>
            <div class="function-box">
                <div class="input-group">
                    <label for="composite">Zu faktorisierende Zahl:</label>
                    <input type="number" id="composite" value="33546163">
                </div>
                <button onclick="factorizeNumber()">Faktorisieren (Rückwärtsberechnung)</button>
                <div class="result" id="factorizationResult">Ergebnis wird hier angezeigt</div>
                <div class="calculation-time" id="factorizationTime"></div>
                <div class="warning-box">
                    Hinweis: Bei sehr großen Zahlen kann die Berechnung lange dauern oder der Browser
                    nicht reagieren. Der verwendete Algorithmus ist absichtlich nicht optimiert,
                    um den Unterschied zu demonstrieren.
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>Beispiel 3: Modulo-Operation (Hash-Funktion)</h3>
        <div class="function-box">
            <div class="input-group">
                <label for="hashInput">Eingabewert:</label>
                <input type="number" id="hashInput" value="12345678">
            </div>
            <div class="input-group">
                <label for="modulo">Modulus (Primzahl):</label>
                <input type="number" id="modulo" value="97">
            </div>
            <button onclick="calculateHash()">Hash berechnen</button>
            <div class="result" id="hashResult">Ergebnis wird hier angezeigt</div>
            <div class="info-box">
                Die Modulo-Operation ist leicht in eine Richtung zu berechnen, aber bei großen Zahlen und
                unbekanntem Eingabewert schwer umzukehren (es gibt viele mögliche Urbilder).
            </div>
        </div>
    </div>

    <div class="card">
        <h3>Performanzvergleich</h3>
        <p>Diese Tabelle zeigt den typischen Rechenaufwand für verschiedene Operationen:</p>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
            <tr style="background-color: var(--primary-light); color: var(--text);">
                <th style="padding: 10px; text-align: left;">Operation</th>
                <th style="padding: 10px; text-align: left;">Aufwand</th>
                <th style="padding: 10px; text-align: left;">Beispielzeit für 100-stellige Zahl</th>
            </tr>
            </thead>
            <tbody>
            <tr style="border-bottom: 1px solid var(--border);">
                <td style="padding: 10px;">Multiplikation von zwei Primzahlen</td>
                <td style="padding: 10px;">O(n²) oder O(n log n) mit optimierten Algorithmen</td>
                <td style="padding: 10px;">Millisekunden</td>
            </tr>
            <tr style="border-bottom: 1px solid var(--border);">
                <td style="padding: 10px;">Primfaktorzerlegung (naiv)</td>
                <td style="padding: 10px;">O(√n) oder schlimmer</td>
                <td style="padding: 10px;">Jahre bis Jahrmillionen</td>
            </tr>
            <tr>
                <td style="padding: 10px;">Modulo-Operation</td>
                <td style="padding: 10px;">O(log n)</td>
                <td style="padding: 10px;">Mikrosekunden</td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="card">
        <h3>Anwendungen in der Kryptographie</h3>
        <p>
            Einwegfunktionen sind die Grundlage für viele kryptographische Verfahren:
        </p>
        <ul>
            <li><strong>RSA-Verschlüsselung:</strong> Basiert auf der Schwierigkeit der Primfaktorzerlegung</li>
            <li><strong>Diffie-Hellman-Schlüsselaustausch:</strong> Basiert auf dem diskreten Logarithmus-Problem</li>
            <li><strong>Digitale Signaturen:</strong> Verwenden Einwegfunktionen, um Dokumente zu signieren</li>
            <li><strong>Passwort-Hashing:</strong> Speichert Passworte in einer Form, die nicht rückgängig gemacht werden kann</li>
        </ul>
    </div>
</div>

<script>
    // Primzahltest (einfache Implementierung)
    function isPrime(num) {
        if (num <= 1) return false;
        if (num <= 3) return true;
        if (num % 2 === 0 || num % 3 === 0) return false;

        for (let i = 5; i * i <= num; i += 6) {
            if (num % i === 0 || num % (i + 2) === 0) return false;
        }
        return true;
    }

    // Vorwärtsberechnung: Multiplikation von Primzahlen
    function multiplyPrimes() {
        const prime1 = parseInt(document.getElementById('prime1').value);
        const prime2 = parseInt(document.getElementById('prime2').value);

        // Primzahl-Validierung
        let isValid = true;
        let errorMessage = "";

        if (!isPrime(prime1)) {
            errorMessage += `${prime1} ist keine Primzahl. `;
            isValid = false;
        }

        if (!isPrime(prime2)) {
            errorMessage += `${prime2} ist keine Primzahl.`;
            isValid = false;
        }

        if (!isValid) {
            document.getElementById('multiplicationResult').textContent = errorMessage;
            document.getElementById('multiplicationTime').textContent = "";
            return;
        }

        // Zeitmessung starten
        const startTime = performance.now();

        // Berechnung durchführen
        const result = prime1 * prime2;

        // Zeitmessung beenden
        const endTime = performance.now();
        const calculationTime = endTime - startTime;

        // Ergebnisse anzeigen
        document.getElementById('multiplicationResult').textContent =
            `${prime1} × ${prime2} = ${result.toLocaleString()}`;
        document.getElementById('multiplicationTime').textContent =
            `Berechnungszeit: ${calculationTime.toFixed(3)} ms`;
    }

    // Rückwärtsberechnung: Primfaktorzerlegung (naive Implementierung)
    function factorizeNumber() {
        const composite = parseInt(document.getElementById('composite').value);

        if (composite <= 1) {
            document.getElementById('factorizationResult').textContent = "Bitte eine Zahl größer als 1 eingeben.";
            document.getElementById('factorizationTime').textContent = "";
            return;
        }

        // Zeitmessung starten
        const startTime = performance.now();

        // Primfaktorzerlegung durchführen (naiver Algorithmus)
        const factors = [];
        let n = composite;

        // Teilen durch 2, solange es möglich ist
        while (n % 2 === 0) {
            factors.push(2);
            n /= 2;
        }

        // Teilen durch ungerade Zahlen
        for (let i = 3; i <= Math.sqrt(n); i += 2) {
            while (n % i === 0) {
                factors.push(i);
                n /= i;
            }
        }

        // Falls n größer als 2 und prim ist
        if (n > 2) {
            factors.push(n);
        }

        // Zeitmessung beenden
        const endTime = performance.now();
        const calculationTime = endTime - startTime;

        // Ergebnisse anzeigen
        let resultText;
        if (factors.length === 1) {
            resultText = `${composite} ist eine Primzahl!`;
        } else {
            resultText = `${composite} = ${factors.join(' × ')}`;
        }

        document.getElementById('factorizationResult').textContent = resultText;
        document.getElementById('factorizationTime').textContent =
            `Berechnungszeit: ${calculationTime.toFixed(3)} ms`;
    }

    // Hash-Funktion berechnen
    function calculateHash() {
        const input = parseInt(document.getElementById('hashInput').value);
        const modulo = parseInt(document.getElementById('modulo').value);

        if (isNaN(input) || isNaN(modulo)) {
            document.getElementById('hashResult').textContent = "Bitte gültige Zahlen eingeben.";
            return;
        }

        if (!isPrime(modulo)) {
            document.getElementById('hashResult').textContent = `${modulo} ist keine Primzahl. Für bessere Hash-Funktionen wird eine Primzahl empfohlen.`;
            return;
        }

        // Hash berechnen
        const hash = input % modulo;

        // Ergebnis anzeigen
        document.getElementById('hashResult').textContent =
            `Hash(${input}) ≡ ${input} mod ${modulo} = ${hash}`;

        // Urbilder-Beispiel hinzufügen
        const preimages = [];
        for (let i = 0; i < 5; i++) {
            preimages.push(input + i * modulo);
        }

        document.getElementById('hashResult').innerHTML +=
            `<div class="example">
                    <p>Mögliche Urbilder für den Hash-Wert ${hash}:</p>
                    <ul>
                        ${preimages.map(val => `<li>${val} mod ${modulo} = ${hash}</li>`).join('')}
                        <li>... und unendlich viele weitere Zahlen der Form ${input} + k·${modulo}</li>
                    </ul>
                </div>`;
    }
</script>
</body>
</html>