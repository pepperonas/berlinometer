<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Altersdurchschnitt, √ñPNV & Arbeitspl√§tze in Berlin</title>
    
    <!-- Social Media Meta Tags -->
    <meta property="og:title" content="Altersdurchschnitt, √ñPNV & Arbeitspl√§tze in Berlin">
    <meta property="og:description" content="Visualisierung sozio√∂konomischer Daten und demografischer Trends in Berlin">
    <meta property="og:image" content="https://mrx3k1.de/immo-berlin/immo-berlin.jpg">
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Altersdurchschnitt, √ñPNV & Arbeitspl√§tze in Berlin">
    <meta name="twitter:description" content="Visualisierung sozio√∂konomischer Daten und demografischer Trends in Berlin">
    <meta name="twitter:image" content="https://mrx3k1.de/immo-berlin/immo-berlin.jpg">
    
    <!-- Standard Meta Tags -->
    <meta name="description" content="Visualisierung sozio√∂konomischer Daten und demografischer Trends in Berlin">
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="https://mrx3k1.de/immo-berlin/immo-berlin.jpg">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="navigation.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Heatmap spezifische Styles */
        .heatmap-container {
            background: #383B4F;
            padding: 2rem;
            border-radius: 12px;
            margin: 2rem 0;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        #berlin-map {
            width: 100%;
            height: auto;
            max-width: 800px;
            margin: 0 auto;
            display: block;
        }

        #berlin-map path {
            stroke: #1f2937;
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        #berlin-map path:hover {
            stroke: #93c5fd;
            stroke-width: 2;
            filter: brightness(1.2);
        }

        #berlin-map text {
            fill: #ffffff;
            font-size: 12px;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .label-name {
            font-size: 14px;
            font-weight: bold;
        }
        
        .label-info {
            font-size: 10px;
            fill: #e5e7eb;
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: var(--spacing-4);
            flex-wrap: wrap;
            gap: var(--spacing-2);
        }
        
        .tab {
            padding: var(--spacing-2) var(--spacing-4);
            background-color: var(--background-darker);
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--accent-blue);
        }
        
        .tab:hover {
            background-color: var(--accent-blue);
        }
        
        .tab.active {
            background-color: var(--accent-blue);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .heatmap-legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .heatmap-legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .heatmap-legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            border: 1px solid #4b5563;
        }
        
        .heatmap-tooltip {
            position: absolute;
            background: #1f2937;
            color: #ffffff;
            padding: 0.75rem;
            border-radius: 8px;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            pointer-events: none;
            z-index: 1000;
            font-size: 0.875rem;
            border: 1px solid #374151;
            display: none;
        }
        
        .heatmap-info-panel {
            background: #383B4F;
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 2rem;
            border: 1px solid #4b5563;
        }

        .heatmap-info-title {
            color: #93c5fd;
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .heatmap-info-detail {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid #4b5563;
        }

        .heatmap-info-detail:last-child {
            border-bottom: none;
        }

        .heatmap-info-label {
            color: #9ca3af;
            font-weight: 500;
        }

        .heatmap-info-value {
            color: #e5e7eb;
        }
        
        .data-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-4);
            margin: var(--spacing-6) 0;
        }
        
        .data-card-small {
            background-color: var(--background-darker);
            border-radius: var(--radius);
            padding: var(--spacing-3);
            text-align: center;
            border: 1px solid var(--accent-blue);
        }
        
        .data-card-title {
            font-size: 16px;
            margin-bottom: var(--spacing-2);
            color: var(--text-primary);
        }
        
        .data-card-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: var(--spacing-2);
            color: var(--accent-blue);
        }
        
        .data-card-subtitle {
            font-size: 12px;
            color: var(--text-secondary);
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            #berlin-map text {
                font-size: 10px;
            }
            .label-info {
                font-size: 8px;
            }
            .heatmap-legend {
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <!-- Navigation wird via JavaScript geladen -->
    </header>

    <main class="content-page">
        <section class="content-header">
            <div class="container">
                <h2>Altersdurchschnitt, √ñPNV & Arbeitspl√§tze in Berlin</h2>
                <p class="lead">Soziodemografische Faktoren f√ºr Immobilieninvestoren</p>
            </div>
        </section>

        <section class="content-body">
            <div class="container">
                <div class="info-box">
                    <h5>üè¢ Demografische Analyse Berlin</h5>
                    <p>Diese interaktive Analyse zeigt wichtige soziodemografische Faktoren, die f√ºr Immobilieninvestoren relevant sind: Altersdurchschnitt, √ñPNV-Anbindung und Arbeitsplatzdichte nach Berliner Bezirken.</p>
                </div>
                
                <div class="data-cards">
                    <div class="data-card-small">
                        <div class="data-card-title">Durchschnittsalter Berlin</div>
                        <div class="data-card-value">42,8 Jahre</div>
                        <div class="data-card-subtitle">J√ºngster Bezirk: Friedrichshain-Kreuzberg (39,4 Jahre)</div>
                    </div>
                    <div class="data-card-small">
                        <div class="data-card-title">Bev√∂lkerungsdichte</div>
                        <div class="data-card-value">4.244 Einw./km¬≤</div>
                        <div class="data-card-subtitle">H√∂chste Dichte: Friedrichshain-Kreuzberg (13.942 Einw./km¬≤)</div>
                    </div>
                    <div class="data-card-small">
                        <div class="data-card-title">Gesamtbev√∂lkerung</div>
                        <div class="data-card-value">3,9 Mio.</div>
                        <div class="data-card-subtitle">Gr√∂√üter Bezirk: Pankow (425.840 Einwohner)</div>
                    </div>
                </div>
                
                <div class="tabs">
                    <div class="tab active" data-type="alter">Altersdurchschnitt</div>
                    <div class="tab" data-type="oepnv">√ñPNV-Anbindung</div>
                    <div class="tab" data-type="arbeit">Arbeitspl√§tze</div>
                    <div class="tab" data-type="gesamt">Gesamtindex</div>
                </div>
                
                <div class="map-container" id="map">
                    <svg viewBox="0 0 800 600" id="berlin-map">
                        <!-- Berlin Bezirke SVG Pfade werden per JavaScript eingef√ºgt -->
                    </svg>
                </div>
                
                <div class="heatmap-legend" id="legend-alter">
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #6fff00;"></div>
                        <span>Sehr junger Altersdurchschnitt (< 40 Jahre)</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #c6ff00;"></div>
                        <span>Junger Altersdurchschnitt (40-41 Jahre)</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffeb00;"></div>
                        <span>Mittlerer Altersdurchschnitt (41-43 Jahre)</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffb700;"></div>
                        <span>Hoher Altersdurchschnitt (43-45 Jahre)</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff7b00;"></div>
                        <span>Sehr hoher Altersdurchschnitt (> 45 Jahre)</span>
                    </div>
                </div>
                
                <div class="heatmap-legend hidden" id="legend-oepnv">
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff3b00;"></div>
                        <span>Sehr hohe √ñPNV-Dichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff7b00;"></div>
                        <span>Hohe √ñPNV-Dichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffb700;"></div>
                        <span>Mittlere √ñPNV-Dichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffeb00;"></div>
                        <span>Moderate √ñPNV-Dichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #c6ff00;"></div>
                        <span>Niedrige √ñPNV-Dichte</span>
                    </div>
                </div>
                
                <div class="heatmap-legend hidden" id="legend-arbeit">
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff3b00;"></div>
                        <span>Sehr hohe Arbeitsplatzdichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff7b00;"></div>
                        <span>Hohe Arbeitsplatzdichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffb700;"></div>
                        <span>Mittlere Arbeitsplatzdichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffeb00;"></div>
                        <span>Moderate Arbeitsplatzdichte</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #c6ff00;"></div>
                        <span>Niedrige Arbeitsplatzdichte</span>
                    </div>
                </div>
                
                <div class="heatmap-legend hidden" id="legend-gesamt">
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff3b00;"></div>
                        <span>Stark urbanes Profil</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ff7b00;"></div>
                        <span>Urbanes Profil</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffb700;"></div>
                        <span>Moderat urbanes Profil</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #ffeb00;"></div>
                        <span>Gemischtes Profil</span>
                    </div>
                    <div class="heatmap-legend-item">
                        <div class="heatmap-legend-color" style="background-color: #c6ff00;"></div>
                        <span>Suburbanes Profil</span>
                    </div>
                </div>
                
                <div class="chart-container">
                    <h4 class="chart-title">Bezirksvergleich nach ausgew√§hltem Kriterium</h4>
                    <canvas id="sozioChart" width="400" height="300"></canvas>
                </div>
                
                <h3>Detaillierte Bezirksanalyse</h3>
                
                <table>
                    <thead>
                        <tr>
                            <th>Bezirk</th>
                            <th>Altersdurchschnitt</th>
                            <th>Einwohner</th>
                            <th>Bev√∂lkerungsdichte</th>
                            <th>√ñPNV-Score</th>
                            <th>Arbeitsplatzdichte</th>
                            <th>Anteil Ausl√§nder</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background-color: rgba(111, 255, 0, 0.1);">
                            <td><strong>Friedrichshain-Kreuzberg</strong></td>
                            <td>39,4 Jahre</td>
                            <td>266.958</td>
                            <td>13.086 Einw./km¬≤</td>
                            <td>9,5/10</td>
                            <td>Hoch</td>
                            <td>28,5%</td>
                        </tr>
                        <tr style="background-color: rgba(111, 255, 0, 0.1);">
                            <td><strong>Mitte</strong></td>
                            <td>39,6 Jahre</td>
                            <td>395.656</td>
                            <td>10.059 Einw./km¬≤</td>
                            <td>9,8/10</td>
                            <td>Sehr hoch</td>
                            <td>37,4%</td>
                        </tr>
                        <tr style="background-color: rgba(198, 255, 0, 0.1);">
                            <td><strong>Pankow</strong></td>
                            <td>41,2 Jahre</td>
                            <td>425.840</td>
                            <td>4.125 Einw./km¬≤</td>
                            <td>7,5/10</td>
                            <td>Mittel</td>
                            <td>18,1%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 235, 0, 0.1);">
                            <td><strong>Neuk√∂lln</strong></td>
                            <td>42,0 Jahre</td>
                            <td>329.488</td>
                            <td>7.332 Einw./km¬≤</td>
                            <td>7,2/10</td>
                            <td>Mittel</td>
                            <td>28,4%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 183, 0, 0.1);">
                            <td><strong>Lichtenberg</strong></td>
                            <td>43,0 Jahre</td>
                            <td>303.341</td>
                            <td>5.804 Einw./km¬≤</td>
                            <td>6,5/10</td>
                            <td>Mittel</td>
                            <td>20,5%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 183, 0, 0.1);">
                            <td><strong>Tempelhof-Sch√∂neberg</strong></td>
                            <td>43,5 Jahre</td>
                            <td>351.565</td>
                            <td>6.624 Einw./km¬≤</td>
                            <td>8,0/10</td>
                            <td>Mittel-Hoch</td>
                            <td>22,8%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 183, 0, 0.1);">
                            <td><strong>Treptow-K√∂penick</strong></td>
                            <td>43,8 Jahre</td>
                            <td>282.775</td>
                            <td>1.686 Einw./km¬≤</td>
                            <td>4,0/10</td>
                            <td>Niedrig</td>
                            <td>16,9%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 183, 0, 0.1);">
                            <td><strong>Spandau</strong></td>
                            <td>44,2 Jahre</td>
                            <td>257.091</td>
                            <td>2.797 Einw./km¬≤</td>
                            <td>5,0/10</td>
                            <td>Niedrig</td>
                            <td>21,3%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 183, 0, 0.1);">
                            <td><strong>Marzahn-Hellersdorf</strong></td>
                            <td>44,5 Jahre</td>
                            <td>280.426</td>
                            <td>4.544 Einw./km¬≤</td>
                            <td>5,0/10</td>
                            <td>Niedrig</td>
                            <td>18,6%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 183, 0, 0.1);">
                            <td><strong>Reinickendorf</strong></td>
                            <td>44,8 Jahre</td>
                            <td>273.677</td>
                            <td>3.050 Einw./km¬≤</td>
                            <td>5,5/10</td>
                            <td>Moderat</td>
                            <td>21,2%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 123, 0, 0.1);">
                            <td><strong>Charlottenburg-Wilmersdorf</strong></td>
                            <td>45,1 Jahre</td>
                            <td>343.853</td>
                            <td>5.312 Einw./km¬≤</td>
                            <td>8,8/10</td>
                            <td>Hoch</td>
                            <td>24,9%</td>
                        </tr>
                        <tr style="background-color: rgba(255, 123, 0, 0.1);">
                            <td><strong>Steglitz-Zehlendorf</strong></td>
                            <td>46,5 Jahre</td>
                            <td>316.852</td>
                            <td>3.089 Einw./km¬≤</td>
                            <td>6,0/10</td>
                            <td>Moderat</td>
                            <td>16,8%</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="highlight">
                    <p><strong>Investment-Insights:</strong> F√ºr Immobilieninvestoren sind besonders Bezirke mit jungem Altersdurchschnitt, guter √ñPNV-Anbindung und hoher Arbeitsplatzdichte interessant. Friedrichshain-Kreuzberg und Mitte bieten das beste Gesamtpaket, w√§hrend Gebiete wie Lichtenberg und Neuk√∂lln ein gutes Preis-Leistungs-Verh√§ltnis bei aufstrebender Entwicklung bieten.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p style="color: #6b7280; font-size: 0.875rem; text-align: center;">Made with ‚ù§Ô∏è by Martin Pfeffer</p>
        </div>
    </footer>

    <div class="heatmap-tooltip" id="tooltip"></div>

    <script src="navigation.js"></script>
    <script>
        // Bezirksdaten
        const bezirke = [
            {
                id: "mitte",
                name: "Mitte",
                flaeche: 39.47,
                einwohner: 395656,
                alter: 39.6,
                alter_farbe: "#6fff00", // Sehr jung
                oepnv_score: 9.8,
                oepnv_text: "Exzellente Anbindung durch U-Bahn, S-Bahn, Bus, Tram. Knotenpunkte: Hauptbahnhof, Alexanderplatz, Potsdamer Platz.",
                oepnv_farbe: "#ff3b00", // Sehr hoch
                arbeit_score: 9.7,
                arbeit_text: "H√∂chste Arbeitsplatzdichte, Regierungsviertel, Tourismusbranche, viele Firmenzentralen",
                arbeit_farbe: "#ff3b00", // Sehr hoch
                gesamt_score: 9.7,
                gesamt_farbe: "#ff3b00", // Stark urban
                pfad: "M396,193 L405,208 L419,213 L432,212 L447,215 L448,228 L452,242 L464,245 L471,251 L476,258 L471,268 L466,278 L447,281 L440,292 L430,293 L425,298 L419,308 L408,308 L398,308 L388,313 L383,326 L371,324 L360,324 L353,331 L342,332 L336,327 L333,313 L323,303 L318,291 L315,279 L307,272 L302,261 L312,253 L323,248 L328,239 L332,227 L347,222 L351,212 L365,208 L374,199 L385,193 Z",
                labelX: 397,
                labelY: 255,
                bevDichte: Math.round(395656 / 39.47),
                arbeitsDichte: "Sehr hoch",
                uBahn: 13,
                sBahn: 11,
                anteilAuslaender: 37.4
            },
            {
                id: "friedrichshain-kreuzberg",
                name: "Friedrichshain-Kreuzberg",
                flaeche: 20.4,
                einwohner: 266958,
                alter: 39.4,
                alter_farbe: "#6fff00", // Sehr jung
                oepnv_score: 9.5,
                oepnv_text: "Sehr gute Anbindung durch U-Bahn, S-Bahn, Bus, Tram. Knotenpunkte: Ostbahnhof, Warschauer Stra√üe.",
                oepnv_farbe: "#ff3b00", // Sehr hoch
                arbeit_score: 8.5,
                arbeit_text: "Hohe Arbeitsplatzdichte, Start-up-Szene, kreative Branchen, Medienwirtschaft",
                arbeit_farbe: "#ff7b00", // Hoch
                gesamt_score: 9.3,
                gesamt_farbe: "#ff3b00", // Stark urban
                pfad: "M471,268 L480,270 L490,269 L503,273 L513,275 L519,284 L522,295 L523,308 L527,320 L524,330 L513,340 L500,344 L489,348 L476,343 L466,338 L458,333 L448,333 L438,331 L428,327 L417,327 L411,320 L398,317 L388,313 L398,308 L408,308 L419,308 L425,298 L430,293 L440,292 L447,281 L466,278 Z",
                labelX: 470,
                labelY: 305,
                bevDichte: Math.round(266958 / 20.4),
                arbeitsDichte: "Hoch",
                uBahn: 9,
                sBahn: 7,
                anteilAuslaender: 28.5
            },
            {
                id: "pankow",
                name: "Pankow",
                flaeche: 103.22,
                einwohner: 425840,
                alter: 41.2,
                alter_farbe: "#c6ff00", // Jung
                oepnv_score: 7.5,
                oepnv_text: "Gute Anbindung in zentralen Bereichen, schlechter im Norden. U-Bahn nur in Prenzlauer Berg.",
                oepnv_farbe: "#ffb700", // Mittel
                arbeit_score: 7.0,
                arbeit_text: "Mittlere Arbeitsplatzdichte, √ºberwiegend kleinere Unternehmen, Start-ups in Prenzlauer Berg",
                arbeit_farbe: "#ffb700", // Mittel
                gesamt_score: 7.2,
                gesamt_farbe: "#ffb700", // Moderat urban
                pfad: "M396,193 L385,193 L374,199 L365,208 L351,212 L347,222 L332,227 L323,236 L310,227 L298,223 L290,213 L294,200 L288,187 L287,173 L293,162 L300,152 L313,145 L326,141 L337,131 L348,119 L359,107 L371,98 L385,93 L400,90 L415,87 L428,89 L443,93 L456,99 L463,111 L469,123 L463,135 L455,146 L453,157 L459,167 L471,173 L479,183 L479,194 L469,200 L457,203 L444,203 L432,200 L419,198 L407,195 Z",
                labelX: 380,
                labelY: 150,
                bevDichte: Math.round(425840 / 103.22),
                arbeitsDichte: "Mittel",
                uBahn: 4,
                sBahn: 6,
                anteilAuslaender: 18.1
            },
            {
                id: "charlottenburg-wilmersdorf",
                name: "Charlottenburg-Wilmersdorf",
                flaeche: 64.72,
                einwohner: 343853,
                alter: 45.1,
                alter_farbe: "#ff7b00", // Sehr hoch
                oepnv_score: 8.8,
                oepnv_text: "Sehr gute Anbindung durch U-Bahn, S-Bahn, Bus. Knotenpunkte: Bahnhof Zoo, Savignyplatz.",
                oepnv_farbe: "#ff7b00", // Hoch
                arbeit_score: 9.2,
                arbeit_text: "Hohe Arbeitsplatzdichte, viele B√ºrofl√§chen, Kurf√ºrstendamm als Einkaufsmeile, Messe Berlin",
                arbeit_farbe: "#ff3b00", // Sehr hoch
                gesamt_score: 8.5,
                gesamt_farbe: "#ff7b00", // Urban
                pfad: "M302,261 L307,272 L315,279 L318,291 L323,303 L333,313 L336,327 L342,332 L333,339 L325,347 L315,357 L302,363 L290,369 L280,378 L271,385 L260,391 L250,383 L240,375 L229,370 L218,363 L210,353 L202,343 L197,332 L192,321 L196,308 L201,295 L205,282 L213,271 L223,260 L234,253 L244,242 L255,233 L265,245 L277,254 L290,258 Z",
                labelX: 260,
                labelY: 310,
                bevDichte: Math.round(343853 / 64.72),
                arbeitsDichte: "Hoch",
                uBahn: 12,
                sBahn: 7,
                anteilAuslaender: 24.9
            },
            {
                id: "spandau",
                name: "Spandau",
                flaeche: 91.91,
                einwohner: 257091,
                alter: 44.2,
                alter_farbe: "#ffb700", // Hoch
                oepnv_score: 5.0,
                oepnv_text: "Moderate Anbindung, S-Bahn und U-Bahn nur in zentralen Bereichen. Randlagen schlecht angebunden.",
                oepnv_farbe: "#ffeb00", // Moderat
                arbeit_score: 4.5,
                arbeit_text: "Geringe Arbeitsplatzdichte, einige Industriegebiete, wenige B√ºrofl√§chen",
                arbeit_farbe: "#c6ff00", // Niedrig
                gesamt_score: 4.2,
                gesamt_farbe: "#c6ff00", // Suburban
                pfad: "M213,271 L205,282 L201,295 L196,308 L192,321 L197,332 L202,343 L202,354 L183,356 L171,361 L159,367 L145,372 L134,379 L126,389 L118,400 L111,410 L100,403 L89,396 L84,384 L85,369 L92,358 L95,345 L91,330 L86,317 L89,302 L93,288 L103,278 L115,269 L127,261 L139,252 L150,244 L162,237 L173,246 L184,254 L196,261 L207,268 Z",
                labelX: 143,
                labelY: 325,
                bevDichte: Math.round(257091 / 91.91),
                arbeitsDichte: "Niedrig",
                uBahn: 3,
                sBahn: 3,
                anteilAuslaender: 21.3
            },
            {
                id: "steglitz-zehlendorf",
                name: "Steglitz-Zehlendorf",
                flaeche: 102.56,
                einwohner: 316852,
                alter: 46.5,
                alter_farbe: "#ff7b00", // Sehr hoch
                oepnv_score: 6.0,
                oepnv_text: "Moderate bis gute Anbindung, U-Bahn nur im n√∂rdlichen Teil. S-Bahn durchgehend. Buslinien fl√§chendeckend.",
                oepnv_farbe: "#ffb700", // Mittel
                arbeit_score: 5.5,
                arbeit_text: "Mittlere Arbeitsplatzdichte, Freie Universit√§t, Kliniken, vereinzelte B√ºrostandorte",
                arbeit_farbe: "#ffeb00", // Moderat
                gesamt_score: 5.2,
                gesamt_farbe: "#ffeb00", // Gemischt
                pfad: "M250,383 L260,391 L271,385 L280,378 L290,369 L302,363 L315,357 L325,347 L333,339 L342,332 L353,331 L360,324 L371,324 L378,334 L387,343 L391,355 L392,368 L387,379 L378,388 L371,398 L362,407 L352,414 L342,420 L331,425 L320,430 L310,435 L298,439 L285,442 L272,444 L260,445 L247,443 L237,437 L228,429 L220,419 L211,411 L202,402 L196,390 L202,380 L210,372 L220,365 L230,369 L240,375 Z",
                labelX: 318,
                labelY: 410,
                bevDichte: Math.round(316852 / 102.56),
                arbeitsDichte: "Moderat",
                uBahn: 5,
                sBahn: 5,
                anteilAuslaender: 16.8
            },
            {
                id: "tempelhof-schoeneberg",
                name: "Tempelhof-Sch√∂neberg",
                flaeche: 53.09,
                einwohner: 351565,
                alter: 43.5,
                alter_farbe: "#ffb700", // Hoch
                oepnv_score: 8.0,
                oepnv_text: "Gute Anbindung durch U-Bahn, S-Bahn und Bus. Dichtes Netz in Sch√∂neberg, etwas d√ºnner in Tempelhof.",
                oepnv_farbe: "#ff7b00", // Hoch
                arbeit_score: 7.0,
                arbeit_text: "Mittlere bis hohe Arbeitsplatzdichte, diverse Gewerbegebiete, B√ºrostandorte",
                arbeit_farbe: "#ffb700", // Mittel
                gesamt_score: 7.8,
                gesamt_farbe: "#ffb700", // Moderat urban
                pfad: "M342,332 L353,331 L360,324 L371,324 L383,326 L388,313 L398,317 L411,320 L417,327 L422,337 L428,347 L429,358 L426,368 L416,376 L407,384 L396,392 L384,398 L371,398 L362,407 L352,414 L342,420 L331,425 L320,430 L312,418 L307,407 L307,395 L312,383 L317,372 L322,360 L332,351 Z",
                labelX: 370,
                labelY: 365,
                bevDichte: Math.round(351565 / 53.09),
                arbeitsDichte: "Mittel-Hoch",
                uBahn: 10,
                sBahn: 5,
                anteilAuslaender: 22.8
            },
            {
                id: "neukoelln",
                name: "Neuk√∂lln",
                flaeche: 44.93,
                einwohner: 329488,
                alter: 42.0,
                alter_farbe: "#ffeb00", // Mittel
                oepnv_score: 7.2,
                oepnv_text: "Gute Anbindung im Norden (U-Bahn), schw√§cher im S√ºden. Mehrere Buslinien, keine Tram.",
                oepnv_farbe: "#ffb700", // Mittel
                arbeit_score: 6.0,
                arbeit_text: "Mittlere Arbeitsplatzdichte, √ºberwiegend kleinere Unternehmen, einige Gewerbegebiete",
                arbeit_farbe: "#ffeb00", // Moderat
                gesamt_score: 6.5,
                gesamt_farbe: "#ffb700", // Moderat urban
                pfad: "M417,327 L428,327 L438,331 L448,333 L458,333 L466,338 L474,346 L481,356 L487,365 L490,376 L487,387 L480,397 L469,403 L457,409 L445,413 L433,415 L421,417 L409,419 L397,420 L384,422 L371,398 L384,398 L396,392 L407,384 L416,376 L426,368 L429,358 L428,347 L422,337 Z",
                labelX: 455,
                labelY: 375,
                bevDichte: Math.round(329488 / 44.93),
                arbeitsDichte: "Mittel",
                uBahn: 5,
                sBahn: 2,
                anteilAuslaender: 28.4
            },
            {
                id: "treptow-koepenick",
                name: "Treptow-K√∂penick",
                flaeche: 167.73,
                einwohner: 282775,
                alter: 43.8,
                alter_farbe: "#ffb700", // Hoch
                oepnv_score: 4.0,
                oepnv_text: "M√§√üige Anbindung, S-Bahn entlang der Hauptachsen, keine U-Bahn, einige Tram- und Buslinien. Weitl√§ufige Gebiete schlecht angebunden.",
                oepnv_farbe: "#c6ff00", // Niedrig
                arbeit_score: 4.5,
                arbeit_text: "Niedrige bis mittlere Arbeitsplatzdichte, Wissenschaftsstandort Adlershof, ansonsten wenige Arbeitspl√§tze",
                arbeit_farbe: "#c6ff00", // Niedrig
                gesamt_score: 4.0,
                gesamt_farbe: "#c6ff00", // Suburban
                pfad: "M523,308 L527,320 L524,330 L513,340 L500,344 L489,348 L487,364 L490,376 L487,387 L480,397 L469,403 L457,409 L445,413 L433,415 L421,417 L409,419 L405,429 L409,441 L415,452 L423,461 L432,471 L443,476 L455,476 L468,477 L480,479 L492,481 L504,483 L516,486 L523,496 L533,496 L543,493 L554,488 L564,481 L572,472 L579,462 L584,451 L589,440 L593,428 L597,416 L599,403 L599,390 L597,377 L591,366 L583,357 L574,349 L564,342 L553,335 L541,329 L533,318 Z",
                labelX: 535,
                labelY: 425,
                bevDichte: Math.round(282775 / 167.73),
                arbeitsDichte: "Niedrig",
                uBahn: 0,
                sBahn: 9,
                anteilAuslaender: 16.9
            },
            {
                id: "marzahn-hellersdorf",
                name: "Marzahn-Hellersdorf",
                flaeche: 61.74,
                einwohner: 280426,
                alter: 44.5,
                alter_farbe: "#ffb700", // Hoch
                oepnv_score: 5.0,
                oepnv_text: "M√§√üige Anbindung, keine U-Bahn, S-Bahn nur im S√ºden. Tram-Netz in Plattenbaugebieten, ansonsten Buslinien.",
                oepnv_farbe: "#ffeb00", // Moderat
                arbeit_score: 4.0,
                arbeit_text: "Niedrige Arbeitsplatzdichte, haupts√§chlich lokale Versorgung und Dienstleistungen",
                arbeit_farbe: "#c6ff00", // Niedrig
                gesamt_score: 4.5,
                gesamt_farbe: "#c6ff00", // Suburban
                pfad: "M513,275 L519,284 L522,295 L523,308 L533,318 L541,329 L553,335 L564,342 L574,349 L583,357 L591,366 L596,353 L599,339 L600,325 L600,311 L596,297 L590,284 L580,274 L570,264 L561,253 L551,242 L541,235 L531,228 L521,222 L510,217 L499,212 L489,208 L480,208 L475,219 L472,231 L471,244 L474,258 L481,268 L490,269 L503,273 Z",
                labelX: 550,
                labelY: 280,
                bevDichte: Math.round(280426 / 61.74),
                arbeitsDichte: "Niedrig",
                uBahn: 0,
                sBahn: 2,
                anteilAuslaender: 18.6
            },
            {
                id: "lichtenberg",
                name: "Lichtenberg",
                flaeche: 52.29,
                einwohner: 303341,
                alter: 43.0,
                alter_farbe: "#ffb700", // Hoch
                oepnv_score: 6.5,
                oepnv_text: "Mittlere Anbindung, U-Bahn und S-Bahn in Teilbereichen. Tram und Bus fl√§chendeckend.",
                oepnv_farbe: "#ffb700", // Mittel
                arbeit_score: 6.0,
                arbeit_text: "Mittlere Arbeitsplatzdichte, einige Gewerbegebiete, Krankenh√§user, Verwaltungsstandorte",
                arbeit_farbe: "#ffeb00", // Moderat
                gesamt_score: 6.2,
                gesamt_farbe: "#ffb700", // Moderat urban
                pfad: "M476,258 L471,251 L464,245 L452,242 L448,228 L447,215 L432,212 L419,213 L405,208 L396,193 L407,195 L419,198 L432,200 L444,203 L457,203 L469,200 L479,194 L479,183 L489,188 L499,193 L499,212 L489,208 L480,208 L475,219 L472,231 L471,244 L474,258 Z",
                labelX: 470,
                labelY: 220,
                bevDichte: Math.round(303341 / 52.29),
                arbeitsDichte: "Mittel",
                uBahn: 4,
                sBahn: 4,
                anteilAuslaender: 20.5
            },
            {
                id: "reinickendorf",
                name: "Reinickendorf",
                flaeche: 89.69,
                einwohner: 273677,
                alter: 44.8,
                alter_farbe: "#ffb700", // Hoch
                oepnv_score: 5.5,
                oepnv_text: "M√§√üige Anbindung, U-Bahn im s√ºdlichen Teil, S-Bahn entlang der Hauptachse. Buslinien fl√§chendeckend.",
                oepnv_farbe: "#ffeb00", // Moderat
                arbeit_score: 5.0,
                arbeit_text: "M√§√üige Arbeitsplatzdichte, einige Industriestandorte (z.B. Tegel), √ºberwiegend Wohngebiete",
                arbeit_farbe: "#ffeb00", // Moderat
                gesamt_score: 5.0,
                gesamt_farbe: "#ffeb00", // Gemischt
                pfad: "M290,213 L294,200 L288,187 L287,173 L293,162 L300,152 L313,145 L326,141 L312,131 L300,120 L290,113 L279,104 L270,94 L260,85 L250,78 L237,72 L224,67 L211,62 L201,70 L192,80 L182,90 L172,100 L161,110 L154,121 L149,134 L148,148 L148,162 L150,176 L155,188 L162,200 L170,211 L179,220 L190,226 L201,232 L211,240 L225,246 L237,250 L249,245 L260,237 L270,228 L280,220 Z",
                labelX: 210,
                labelY: 140,
                bevDichte: Math.round(273677 / 89.69),
                arbeitsDichte: "Moderat",
                uBahn: 6,
                sBahn: 4,
                anteilAuslaender: 21.2
            }
        ];

        const svgMap = document.getElementById('berlin-map');
        const tooltip = document.getElementById('tooltip');
        const tabs = document.querySelectorAll('.tab');
        const legends = document.querySelectorAll('[id^="legend-"]');
        
        let currentType = 'alter';

        // Tabs Event-Listener
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                currentType = tab.getAttribute('data-type');
                updateMap();
                updateLabels();
                updateChart();
                updateLegend();
            });
        });
        
        // Legend aktualisieren
        function updateLegend() {
            legends.forEach(legend => {
                legend.classList.add('hidden');
            });
            
            const activeLegend = document.getElementById(`legend-${currentType}`);
            if (activeLegend) {
                activeLegend.classList.remove('hidden');
            }
        }

        // Karte aktualisieren basierend auf dem ausgew√§hlten Tab
        function updateMap() {
            bezirke.forEach(bezirk => {
                const path = document.getElementById(bezirk.id);
                if (path) {
                    switch(currentType) {
                        case 'alter':
                            path.setAttribute('fill', bezirk.alter_farbe);
                            break;
                        case 'oepnv':
                            path.setAttribute('fill', bezirk.oepnv_farbe);
                            break;
                        case 'arbeit':
                            path.setAttribute('fill', bezirk.arbeit_farbe);
                            break;
                        case 'gesamt':
                            path.setAttribute('fill', bezirk.gesamt_farbe);
                            break;
                    }
                }
            });
        }

        // Chart
        const ctx = document.getElementById('sozioChart').getContext('2d');
        let sozioChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: '',
                    data: [],
                    backgroundColor: [],
                    borderColor: '#333',
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        function updateChart() {
            let data, labels, title, colors;
            
            switch(currentType) {
                case 'alter':
                    labels = ['Friedrichshain-Kreuzberg', 'Mitte', 'Pankow', 'Neuk√∂lln', 'Lichtenberg', 'Tempelhof-Sch√∂neberg', 'Treptow-K√∂penick', 'Spandau', 'Marzahn-Hellersdorf', 'Reinickendorf', 'Charlottenburg-Wilmersdorf', 'Steglitz-Zehlendorf'];
                    data = [39.4, 39.6, 41.2, 42.0, 43.0, 43.5, 43.8, 44.2, 44.5, 44.8, 45.1, 46.5];
                    title = 'Altersdurchschnitt nach Bezirken (Jahre)';
                    colors = ['#6fff00', '#6fff00', '#c6ff00', '#ffeb00', '#ffb700', '#ffb700', '#ffb700', '#ffb700', '#ffb700', '#ffb700', '#ff7b00', '#ff7b00'];
                    break;
                case 'oepnv':
                    labels = ['Mitte', 'Friedrichshain-Kreuzberg', 'Charlottenburg-Wilmersdorf', 'Tempelhof-Sch√∂neberg', 'Pankow', 'Neuk√∂lln', 'Lichtenberg', 'Steglitz-Zehlendorf', 'Reinickendorf', 'Spandau', 'Marzahn-Hellersdorf', 'Treptow-K√∂penick'];
                    data = [9.8, 9.5, 8.8, 8.0, 7.5, 7.2, 6.5, 6.0, 5.5, 5.0, 5.0, 4.0];
                    title = '√ñPNV-Anbindung nach Bezirken (Score 1-10)';
                    colors = ['#ff3b00', '#ff3b00', '#ff7b00', '#ff7b00', '#ffb700', '#ffb700', '#ffb700', '#ffb700', '#ffeb00', '#ffeb00', '#ffeb00', '#c6ff00'];
                    break;
                case 'arbeit':
                    labels = ['Mitte', 'Charlottenburg-Wilmersdorf', 'Friedrichshain-Kreuzberg', 'Tempelhof-Sch√∂neberg', 'Pankow', 'Lichtenberg', 'Neuk√∂lln', 'Steglitz-Zehlendorf', 'Reinickendorf', 'Spandau', 'Marzahn-Hellersdorf', 'Treptow-K√∂penick'];
                    data = [9.7, 9.2, 8.5, 7.0, 7.0, 6.0, 6.0, 5.5, 5.0, 4.5, 4.0, 4.5];
                    title = 'Arbeitsplatzdichte nach Bezirken (Score 1-10)';
                    colors = ['#ff3b00', '#ff3b00', '#ff7b00', '#ffb700', '#ffb700', '#ffeb00', '#ffeb00', '#ffeb00', '#ffeb00', '#c6ff00', '#c6ff00', '#c6ff00'];
                    break;
                case 'gesamt':
                    labels = ['Mitte', 'Friedrichshain-Kreuzberg', 'Charlottenburg-Wilmersdorf', 'Tempelhof-Sch√∂neberg', 'Pankow', 'Neuk√∂lln', 'Lichtenberg', 'Steglitz-Zehlendorf', 'Reinickendorf', 'Spandau', 'Marzahn-Hellersdorf', 'Treptow-K√∂penick'];
                    data = [9.7, 9.3, 8.5, 7.8, 7.2, 6.5, 6.2, 5.2, 5.0, 4.2, 4.5, 4.0];
                    title = 'Gesamtindex Urbanit√§t nach Bezirken (Score 1-10)';
                    colors = ['#ff3b00', '#ff3b00', '#ff7b00', '#ffb700', '#ffb700', '#ffb700', '#ffb700', '#ffeb00', '#ffeb00', '#c6ff00', '#c6ff00', '#c6ff00'];
                    break;
            }
            
            sozioChart.data.labels = labels;
            sozioChart.data.datasets[0].data = data;
            sozioChart.data.datasets[0].label = title;
            sozioChart.data.datasets[0].backgroundColor = colors;
            sozioChart.options.plugins.title = {
                display: true,
                text: title
            };
            sozioChart.update();
        }
        
        // SVG Pfade f√ºr die Bezirke erstellen
        bezirke.forEach(bezirk => {
            // Pfad erstellen
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('id', bezirk.id);
            path.setAttribute('d', bezirk.pfad);
            path.setAttribute('fill', bezirk.alter_farbe);
            
            // Hover-Effekt und Klick-Interaktion
            path.addEventListener('mousemove', (e) => {
                tooltip.style.display = 'block';
                tooltip.style.left = `${e.pageX + 15}px`;
                tooltip.style.top = `${e.pageY - 15}px`;
                
                let tooltipContent = `<strong>${bezirk.name}</strong><br>`;
                
                switch(currentType) {
                    case 'alter':
                        tooltipContent += `Altersdurchschnitt: ${bezirk.alter} Jahre<br>
                                          Einwohner: ${bezirk.einwohner.toLocaleString()}<br>
                                          Bev√∂lkerungsdichte: ${bezirk.bevDichte} Einw./km¬≤<br>
                                          Anteil Ausl√§nder: ${bezirk.anteilAuslaender}%`;
                        break;
                    case 'oepnv':
                        tooltipContent += `√ñPNV-Score: ${bezirk.oepnv_score}/10<br>
                                          U-Bahn-Stationen: ${bezirk.uBahn}<br>
                                          S-Bahn-Stationen: ${bezirk.sBahn}<br><br>
                                          ${bezirk.oepnv_text}`;
                        break;
                    case 'arbeit':
                        tooltipContent += `Arbeitsplatzdichte: ${bezirk.arbeit_score}/10<br>
                                          Niveau: ${bezirk.arbeitsDichte}<br><br>
                                          ${bezirk.arbeit_text}`;
                        break;
                    case 'gesamt':
                        tooltipContent += `Gesamtindex: ${bezirk.gesamt_score}/10<br>
                                          Altersdurchschnitt: ${bezirk.alter} Jahre<br>
                                          √ñPNV-Score: ${bezirk.oepnv_score}/10<br>
                                          Arbeitsplatzdichte: ${bezirk.arbeit_score}/10`;
                        break;
                }
                
                tooltip.innerHTML = tooltipContent;
            });
            
            path.addEventListener('mouseout', () => {
                tooltip.style.display = 'none';
            });
            
            svgMap.appendChild(path);
            
            // Bezirksnamen als Text hinzuf√ºgen
            const nameText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            nameText.setAttribute('x', bezirk.labelX);
            nameText.setAttribute('y', bezirk.labelY);
            nameText.setAttribute('class', 'label-name');
            nameText.setAttribute('text-anchor', 'middle');
            nameText.textContent = bezirk.name;
            svgMap.appendChild(nameText);
            
            // Infotext je nach Tab
            const infoText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            infoText.setAttribute('x', bezirk.labelX);
            infoText.setAttribute('y', bezirk.labelY + 15);
            infoText.setAttribute('class', 'label-info');
            infoText.setAttribute('id', `info-${bezirk.id}`);
            infoText.setAttribute('text-anchor', 'middle');
            infoText.textContent = `${bezirk.alter} Jahre`;
            svgMap.appendChild(infoText);
        });
        
        // Label-Texte aktualisieren basierend auf Tab
        function updateLabels() {
            bezirke.forEach(bezirk => {
                const infoText = document.getElementById(`info-${bezirk.id}`);
                if (!infoText) return;
                
                switch(currentType) {
                    case 'alter':
                        infoText.textContent = `${bezirk.alter} Jahre`;
                        break;
                    case 'oepnv':
                        infoText.textContent = `√ñPNV: ${bezirk.oepnv_score}/10`;
                        break;
                    case 'arbeit':
                        infoText.textContent = `Jobs: ${bezirk.arbeit_score}/10`;
                        break;
                    case 'gesamt':
                        infoText.textContent = `Index: ${bezirk.gesamt_score}/10`;
                        break;
                }
            });
        }
        
        // Initial chart update
        updateChart();
    </script>
</body>
</html>
